var spawn   = require('child_process').spawn,
    colors  = require('colors'),
    errors  = [],
    phantom = spawn('phantomjs', ['phantom.js']);

phantom.stdout.on('data', function(data) {
  data = data.toString();

  if (/^ok/.test(data)) {
    process.stdout.write('.'.green);

  } else if (/^not ok/.test(data)) {
    process.stdout.write('.'.red);
    errors.push(data);

  } else {
    process.stdout.write('\n' + data);
  }
});

phantom.on('exit', function() {
  console.log('\n' + errors.join('\n').red);
});
